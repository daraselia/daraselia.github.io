!function(){var e,t,n=3e4,a=n/1e3,i=0,r=document.getElementById("startScreen"),o=document.getElementById("resultScreen"),s=document.getElementById("numHits"),d=document.getElementById("clk"),c=document.getElementById("restart"),l=document.getElementById("timer");t={width:375,height:560,scale:1,bg:{src:"images/bg.jpg"},zombies:[{name:"granny",slices:[{name:"falling",src:"images/granny.png"}]},{name:"stripper",slices:[{name:"falling",src:"images/stipper.png"}]},{name:"skateboarder",slices:[{name:"falling",src:"images/skateboarder.png"}]}]},e=BLOCKS.game(t),e.prepare=function(){var g,m=0,u,h=[],b=e.height-20,f=function(t){var n;for(n=0;n<h.length;n+=1)h[n].isPointInside(t)&&(h[n].removeMotors(),e.addMotor("alpha",{object:h[n],duration:500,amount:-1}),e.addTicker(p,500,h[n]),i++)},p=function(t){var n;for(n=0;n<h.length;n+=1)if(t===h[n]){h.splice(n,1);break}e.stage.removeView(t),t.destroy(),t=null},v=function(){var n,a=function(){e.addMotor("alpha",{object:n,duration:1e3,amount:-1,easing:"easeIn",callback:function(){p(n)}}),n.cropHeight=n.height,e.addMotor("cropHeight",{object:n,duration:500,amount:-n.height,easing:"easeIn"}),e.addMotor("y",{object:n,duration:500,amount:n.height,easing:"easeIn"})};n=BLOCKS.block(t.zombies[Math.floor(Math.random()*t.zombies.length)]),n.layer=e.layers[2],e.stage.addView(n),h.push(n),n.x=Math.random()*(e.width-n.width),n.y=-n.height,e.addMotor("y",{object:n,duration:1e3,amount:b,easing:"linear",callback:function(){e.addTicker(a,1e3)}}),e.addTicker(v,600)};g=BLOCKS.slice(t.bg),g.layer=e.layers[0],e.stage.addView(g),e.controller.addEventListener("tap",f),r.classList.add("visible"),d.addEventListener("click",function(){r.classList.remove("visible"),v(),l.innerHTML=a;var t=setInterval(function(){l.innerHTML=--a,0>=a&&clearInterval(t)},1e3);setTimeout(function(){e.destroy(),o.classList.add("visible"),s.innerHTML=i},n)}),c.addEventListener("click",function(){location.reload()})}}();